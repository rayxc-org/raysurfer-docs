---
title: TypeScript SDK
description: "Drop-in replacement for Claude Agent SDK"
---

## Installation

```bash
npm install raysurfer
```

## Setup

Set your API key:

```bash
export RAYSURFER_API_KEY=your_api_key_here
```

Get your key from the [dashboard](https://raysurfer.com/dashboard/api-keys).

## Usage

Swap your import and client class name. Options use the same field names:

```typescript
// Before
import { ClaudeSDKClient } from "@anthropic-ai/claude-agent-sdk";

// After
import { RaysurferClient } from "raysurfer";

const client = new RaysurferClient({
  allowedTools: ["Read", "Write", "Bash"],
  systemPrompt: "You are a helpful assistant.",
});

for await (const msg of client.query("Generate quarterly report")) {
  console.log(msg);
}
```

## Method Mapping

| Claude SDK | Raysurfer |
|------------|-----------|
| `new ClaudeSDKClient(options)` | `new RaysurferClient(options)` |
| `client.query(prompt)` | `client.query(prompt)` |

## Options

Options mirror the Claude Agent SDK fields. All standard options work:

```typescript
const client = new RaysurferClient({
  allowedTools: ["Read", "Write", "Bash"],
  systemPrompt: "You are a helpful assistant.",
  model: "claude-opus-4-5-20250514",
  maxTurns: 10,
  workingDirectory: "/path/to/working/dir",
  // Raysurfer-specific options
  snipsDesired: "company",
  namespace: "my-namespace",
  debug: false,
});
```

Caching is enabled automatically when `RAYSURFER_API_KEY` is set.

## Snippet Retrieval Scope

Control which cached snippets are retrieved using `snipsDesired`:

```typescript
import { RaysurferClient } from "raysurfer";

// Include company-level snippets
const client = new RaysurferClient({
  allowedTools: ["Read", "Write", "Bash"],
  snipsDesired: "company",  // Company-level snippets (Team/Enterprise)
});

// Enterprise: Retrieve client-specific snippets only
const enterpriseClient = new RaysurferClient({
  allowedTools: ["Read", "Write", "Bash"],
  snipsDesired: "client",   // Client workspace snippets (Enterprise only)
});
```

| Configuration | Required Tier |
|--------------|---------------|
| `snipsDesired: "company"` | TEAM or ENTERPRISE |
| `snipsDesired: "client"` | ENTERPRISE only |

## Full Example

```typescript
import { RaysurferClient } from "raysurfer";

process.env.RAYSURFER_API_KEY = "your_api_key";

const client = new RaysurferClient({
  allowedTools: ["Read", "Write", "Bash"],
  systemPrompt: "You are a helpful assistant.",
});

// First run: generates and caches code
for await (const msg of client.query("Fetch GitHub trending repos")) {
  console.log(msg);
}

// Second run: retrieves from cache (instant)
for await (const msg of client.query("Fetch GitHub trending repos")) {
  console.log(msg);
}
```

## Without Caching

If `RAYSURFER_API_KEY` is not set, `RaysurferClient` behaves exactly like `ClaudeSDKClient` — no caching, just a pass-through wrapper.

## Low-Level API

For custom integrations, use the `RaySurfer` client directly.

### Complete Low-Level Example with Anthropic API

```typescript
import Anthropic from "@anthropic-ai/sdk";
import { RaySurfer } from "raysurfer";

const client = new RaySurfer({ apiKey: "your_raysurfer_api_key" });
const task = "Fetch GitHub trending repos";

// 1. Retrieve cached code files for a task
const result = await client.getCodeFiles({
  task,
  topK: 5,
  minVerdictScore: 0.3,
});

// result.addToLlmPrompt contains a pre-formatted string like:
// "
//
// You have access to pre-written code files:
// - .raysurfer_code/github_fetcher.ts: Fetches trending repos
// ..."

// Augment your system prompt with cached code context
const basePrompt = "You are a helpful coding assistant.";
const augmentedPrompt = basePrompt + result.addToLlmPrompt;

// Make your Anthropic API call with the augmented prompt
const anthropic = new Anthropic();
const response = await anthropic.messages.create({
  model: "claude-opus-4-5-20250514",
  max_tokens: 1024,
  system: augmentedPrompt,
  messages: [{ role: "user", content: "Fetch the top 10 trending GitHub repos" }],
});

console.log(response.content[0].text);

// 2. Upload new code snippets after execution
//    Voting is triggered automatically when autoVote is true (default)
await client.uploadNewCodeSnips(
  task,                                                         // user query
  [{ path: "fetch_repos.ts", content: "function fetch() { ... }" }], // code files
  true,                                                         // succeeded
  undefined,                                                    // cachedCodeBlocks
  true,                                                         // autoVote (default)
  "Fetched 10 trending repos successfully",                     // execution logs
);

// 3. (Optional) Vote on a cached snippet manually
//    Only needed if you want explicit control — uploadNewCodeSnips already votes by default
await client.voteCodeSnip({
  task,
  codeBlockId: result.files[0].codeBlockId,
  codeBlockName: result.files[0].filename,
  codeBlockDescription: result.files[0].description,
  succeeded: true,
});
```

### Response Fields

The `getCodeFiles()` response includes:

| Field | Type | Description |
|-------|------|-------------|
| `files` | `CodeFile[]` | Retrieved code files with metadata |
| `task` | `string` | The task that was searched |
| `totalFound` | `number` | Total matches found |
| `addToLlmPrompt` | `string` | Pre-formatted string to append to your LLM system prompt |

Each `CodeFile` contains `codeBlockId`, `filename`, `source`, `description`, `verdictScore`, `thumbsUp`, `thumbsDown`, and `similarityScore`.

### Method Reference

| Method | Description |
|--------|-------------|
| `getCodeFiles({ task, topK?, minVerdictScore?, preferComplete?, cacheDir? })` | Retrieve cached code files with `addToLlmPrompt` for LLM augmentation |
| `getCodeSnips({ task, topK?, minVerdictScore? })` | Retrieve cached code snippets by semantic search |
| `uploadNewCodeSnips(task, filesWritten, succeeded, cachedCodeBlocks?, autoVote?, executionLogs?)` | Store new code files for future reuse (auto-votes by default) |
| `voteCodeSnip({ task, codeBlockId, codeBlockName, codeBlockDescription, succeeded })` | Vote on snippet usefulness (triggers async backend voting) |
