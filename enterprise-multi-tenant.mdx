---
title: "Multi-Tenant Isolation"
description: "Isolate cached snippets per customer with workspaces"
---

<Warning>
  Multi-tenant isolation is an **enterprise-only** feature.
</Warning>

## Overview

If you're building a product that serves multiple customers, you need their
cached snippets to be completely isolated. Customer A should never see
Customer B's code.

Raysurfer workspaces provide this isolation. Each workspace is a completely
separate cache — snippets uploaded to one workspace can never be retrieved
from another.

---

## Setup

### 1. Create Workspaces

Contact support to provision a workspace for each of your customers. You'll
get a `workspace_id` for each one.

### 2. Pass the Workspace ID

When handling a request for a specific customer, just pass their workspace ID:

<CodeGroup>

```python Python
from raysurfer import RaysurferClient
from claude_agent_sdk import ClaudeAgentOptions

options = ClaudeAgentOptions(allowed_tools=["Read", "Write", "Bash"])

# Acme's requests use Acme's workspace
async with RaysurferClient(options, workspace_id="ws_acme...") as client:
    await client.query("Process shipment data")
    async for msg in client.response():
        print(msg)
```

```typescript TypeScript
import { RaysurferClient } from "raysurfer";

// Acme's requests use Acme's workspace
const client = new RaysurferClient({
  allowedTools: ["Read", "Write", "Bash"],
  workspaceId: "ws_acme...",
});

for await (const msg of client.query("Process shipment data")) {
  console.log(msg);
}
```

</CodeGroup>

That's it. All uploads and retrievals are now isolated to that customer.

---

## Example: Multi-Tenant App

```python
from raysurfer import RaysurferClient
from claude_agent_sdk import ClaudeAgentOptions

# Map your customer IDs to workspace IDs
WORKSPACES = {
    "acme": "ws_abc123...",
    "beta": "ws_def456...",
}

async def handle_customer_request(customer_id: str, task: str):
    options = ClaudeAgentOptions(allowed_tools=["Read", "Write", "Bash"])

    async with RaysurferClient(options, workspace_id=WORKSPACES[customer_id]) as client:
        await client.query(task)
        async for msg in client.response():
            yield msg
```

---

## FAQ

### Can snippets leak between workspaces?

No. Workspaces are completely isolated. There is no code path that allows
cross-workspace access.

### What if I don't set a workspace_id?

Your organization's shared cache is used. All users in your org see the same
snippets — fine for internal use, but not for multi-tenant scenarios.

### Can I query multiple workspaces at once?

No. Each client is scoped to one workspace. Query separately if needed.
